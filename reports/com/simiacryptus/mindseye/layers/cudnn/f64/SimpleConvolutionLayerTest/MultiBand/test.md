# SimpleConvolutionLayer
## MultiBand
### Json Serialization
Code from [LayerTestBase.java:84](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L84) executed in 0.00 seconds: 
```java
    JsonObject json = layer.getJson();
    NNLayer echo = NNLayer.fromJson(json);
    assert (echo != null) : "Failed to deserialize";
    assert (layer != echo) : "Serialization did not copy";
    Assert.assertEquals("Serialization not equal", layer, echo);
    return new GsonBuilder().setPrettyPrinting().create().toJson(json);
```

Returns: 

```
    {
      "class": "com.simiacryptus.mindseye.layers.cudnn.f64.SimpleConvolutionLayer",
      "id": "c88cbdf1-1c2a-4a5e-b964-890900000f5d",
      "isFrozen": false,
      "name": "SimpleConvolutionLayer/c88cbdf1-1c2a-4a5e-b964-890900000f5d",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          -0.124,
          1.468,
          1.2,
          1.656,
          -0.416,
          0.92,
          0.744,
          0.844,
          0.984,
          0.88,
          -0.152,
          1.352,
          1.116,
          -0.56,
          1.184,
          1.624,
          1.064,
          0.528,
          -1.208,
          0.356,
          -1.38,
          0.968,
          -1.864,
          -1.576,
          -0.104,
          1.792,
          0.112,
          -1.068,
          -1.424,
          1.344,
          -0.728,
          1.972,
          0.02,
          -0.52,
          1.712,
          0.66,
          0.904,
          1.992,
          -0.108,
          -1.08,
          -1.74,
          -1.664,
          -0.212,
          1.056,
          0.112,
          -0.912,
          0.544,
          1.828,
          0.564,
          -1.56,
          1.636,
          1.828,
          1.324,
          1.852,
          -1.076,
          -1.88,
          1.872,
          -0.064,
          -0.164,
          1.912,
          0.784,
          1.772,
          -0.232,
          1.568,
          0.684,
          -1.232,
          1.836,
          -1.608,
          -1.652,
          0.596,
          -0.472,
          1.848,
          1.28,
          1.924,
          -0.604,
          -0.788,
          0.348,
          -0.92,
          0.908,
          1.916,
          1.444
        ]
      },
      "strideX": 1,
      "strideY": 1,
      "simple": false
    }
```



### Example Input/Output Pair
Code from [LayerTestBase.java:121](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L121) executed in 0.00 seconds: 
```java
    SimpleEval eval = SimpleEval.run(layer, inputPrototype);
    return String.format("--------------------\nInput: \n[%s]\n--------------------\nOutput: \n%s",
      Arrays.stream(inputPrototype).map(t->t.prettyPrint()).reduce((a,b)->a+",\n"+b).get(),
      eval.getOutput().prettyPrint());
```

Returns: 

```
    --------------------
    Input: 
    [[
    	[ [ -0.144, 1.94, 1.576 ], [ 0.16, 1.144, -1.6 ], [ 0.936, -0.968, 0.064 ] ],
    	[ [ -1.136, -1.408, -1.052 ], [ 0.64, 0.692, -0.636 ], [ -1.664, 1.376, -0.376 ] ],
    	[ [ 0.28, 0.076, -0.272 ], [ 0.108, -1.296, -1.412 ], [ 1.28, 0.308, 1.996 ] ]
    ]]
    --------------------
    Output: 
    [
    	[ [ -7.64576, -2.6611200000000004, -7.245232 ], [ 8.651504000000001, 2.241536000000001, -0.36001599999999995 ], [ -1.39936, 0.664991999999999, 1.3690879999999994 ] ],
    	[ [ 8.294319999999999, -1.9525600000000003, -8.562624 ], [ -6.360639999999999, -1.9090880000000008, 7.636096000000003 ], [ 3.4737120000000004, -7.601296000000001, -2.4443199999999994 ] ],
    	[ [ 1.7278560000000003, -2.4373760000000004, -2.2174719999999994 ], [ 6.4991840000000005, -3.3604319999999994, -4.616448000000001 ], [ -6.6288160000000005, -7.7947359999999986, -6.809728 ] ]
    ]
```



### Reference Implementation
Code from [LayerTestBase.java:132](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L132) executed in 0.01 seconds: 
```java
    System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(referenceLayer.getJson()));
    getEquivalencyTester().test(referenceLayer, layer, inputPrototype);
```
Logging: 
```
    {
      "class": "com.simiacryptus.mindseye.layers.aparapi.ConvolutionLayer",
      "id": "c88cbdf1-1c2a-4a5e-b964-890900000f5e",
      "isFrozen": false,
      "name": "ConvolutionLayer/c88cbdf1-1c2a-4a5e-b964-890900000f5e",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          -0.124,
          1.468,
          1.2,
          1.656,
          -0.416,
          0.92,
          0.744,
          0.844,
          0.984,
          -1.068,
          -1.424,
          1.344,
          -0.728,
          1.972,
          0.02,
          -0.52,
          1.712,
          0.66,
          -1.076,
          -1.88,
          1.872,
          -0.064,
          -0.164,
          1.912,
          0.784,
          1.772,
          -0.232,
          0.88,
          -0.152,
          1.352,
          1.116,
          -0.56,
          1.184,
          1.624,
          1.064,
          0.528,
          0.904,
          1.992,
          -0.108,
          -1.08,
          -1.74,
          -1.664,
          -0.212,
          1.056,
          0.112,
          1.568,
          0.684,
          -1.232,
          1.836,
          -1.608,
          -1.652,
          0.596,
          -0.472,
          1.848,
          -1.208,
          0.356,
          -1.38,
          0.968,
          -1.864,
          -1.576,
          -0.104,
          1.792,
          0.112,
          -0.912,
          0.544,
          1.828,
          0.564,
          -1.56,
          1.636,
          1.828,
          1.324,
          1.852,
          1.28,
          1.924,
          -0.604,
          -0.788,
          0.348,
          -0.92,
          0.908,
          1.916,
          1.444
        ]
      },
      "skip": {
        "dimensions": [
          1,
          1
        ]
      },
      "simple": true
    }
    Inputs: [
    	[ [ -0.144, 1.94, 1.576 ], [ 0.16, 1.144, -1.6 ], [ 0.936, -0.968, 0.064 ] ],
    	[ [ -1.136, -1.408, -1.052 ], [ 0.64, 0.692, -0.636 ], [ -1.664, 1.376, -0.376 ] ],
    	[ [ 0.28, 0.076, -0.272 ], [ 0.108, -1.296, -1.412 ], [ 1.28, 0.308, 1.996 ] ]
    ]
    Error: [
    	[ [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ] ]
    ]
    Accuracy:
    absoluteTol: 0.0000e+00 +- 0.0000e+00 [0.0000e+00 - 0.0000e+00] (27#)
    relativeTol: 0.0000e+00 +- 0.0000e+00 [0.0000e+00 - 0.0000e+00] (27#)
    
```

### Differential Validation
Code from [LayerTestBase.java:139](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L139) executed in 0.16 seconds: 
```java
    getDerivativeTester().test(layer, inputPrototype);
```
Logging: 
```
    Component: SimpleConvolutionLayer/c88cbdf1-1c2a-4a5e-b964-890900000f5d
    Inputs: [
    	[ [ -0.144, 1.94, 1.576 ], [ 0.16, 1.144, -1.6 ], [ 0.936, -0.968, 0.064 ] ],
    	[ [ -1.136, -1.408, -1.052 ], [ 0.64, 0.692, -0.636 ], [ -1.664, 1.376, -0.376 ] ],
    	[ [ 0.28, 0.076, -0.272 ], [ 0.108, -1.296, -1.412 ], [ 1.28, 0.308, 1.996 ] ]
    ]
    output=[
    	[ [ -7.64576, -2.6611200000000004, -7.245232 ], [ 8.651504000000001, 2.241536000000001, -0.36001599999999995 ], [ -1.39936, 0.664991999999999, 1.3690879999999994 ] ],
    	[ [ 8.294319999999999, -1.9525600000000003, -8.562624 ], [ -6.360639999999999, -1.9090880000000008, 7.636096000000003 ], [ 3.4737120000000004, -7.601296000000001, -2.4443199999999994 ] ],
    	[ [ 1.7278560000000003, -2.4373760000000004, -2.2174719999999994 ], [ 6.4991840000000005, -3.3604319999999994, -4.616448000000001 ], [ -6.6288160000000005, -7.7947359999999986, -6.809728 ] ]
    ]
    measured/actual: [ [ -0.41600000000308057, 0.9200000000042508, 0.0, 0.8440000000042858, 0.9840000000060911, 0.0, 0.0, 0.0, 0.0, 1.9719999999967541 ], [ 1.6559999999987696, -0.41600000001196236, 0.9200000000020303, 0.7440000000080715, 0.8440000000042858, 0.9839999999972093, 0.0, 0.0, 0.0, -0.7279999999987297 ], [ 0.0, 1.6559999999898878, -0.4159999999986397, 0.0, 0.743999999990308, 0.843999999995404, 0.0, 0.0, 0.0, 0.0 ], [ 1.467999999995584, 1.1999999999900979, 0.0, -0.4159999999941988, 0.9200000000042508, 0.0, 0.8439999999998449, 0.9839999999972093, 0.0, -1.424000000005421 ], [ -0.12400000000134526, 1.467999999995584, 1.2000000000012, 1.6560000000076514, -0.4159999999941988, 0.919999999995369, 0.7439999999991898, 0.8440000000042858, 0.9839999999972093, -1.0680000000018453 ], [ 0.0, -0.12400000001022704, 1.4680000000000248, 0.0, 1.6559999999898878, -0.41600000000308057, 0.0, 0.7439999999991898, 0.8440000000042858, 0.0 ], [ 0.0, 0.0, 0.0, 1.467999999995584, 1.1999999999900979, 0.0, -0.4159999999986397, 0.9200000000042508, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, -0.12399999999246347, 1.467999999995584, 1.1999999999989797, 1.6559999999987696, -0.4159999999
```
...[skipping 5218 bytes](etc/1.txt)...
```
    664, 1.28, 0.0 ], [ 0.0, -0.144, -1.136, 0.0, 0.16, 0.64, 0.0, 0.936, -1.664, 0.0 ], [ 0.0, 0.0, 0.0, -1.136, 0.28, 0.0, 0.64, 0.108, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, -0.144, -1.136, 0.28, 0.16, 0.64, 0.108, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, -0.144, -1.136, 0.0, 0.16, 0.64, 0.0 ], [ 0.692, -1.296, 0.0, 1.376, 0.308, 0.0, 0.0, 0.0, 0.0, 0.0 ] ]
    Error: [ [ -8.24174062330485E-12, 8.851669397458295E-13, 0.0, 5.441203043687892E-12, 1.2800871473928055E-12, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ -4.2808812050765255E-12, 6.400435736964027E-13, 8.851669397458295E-13, -4.170996881214251E-12, 5.441203043687892E-12, -7.601697049608447E-12, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 4.600902991924727E-12, 6.400435736964027E-13, 0.0, -4.170996881214251E-12, -3.44058115331336E-12, 0.0, 0.0, 0.0, 0.0 ], [ -6.021183551752074E-12, 3.610667320685934E-12, 0.0, 6.400435736964027E-13, 8.851669397458295E-13, 0.0, 1.000310945187266E-12, 1.2800871473928055E-12, 0.0, 0.0 ], [ -4.140826570520062E-12, -6.021183551752074E-12, 1.390221271435621E-12, 4.600902991924727E-12, 6.400435736964027E-13, 8.851669397458295E-13, 2.6989521728637555E-13, 5.441203043687892E-12, -7.601697049608447E-12, 0.0 ], [ 0.0, 4.74095762648119E-12, 6.401545959988653E-13, 0.0, 4.600902991924727E-12, 6.400435736964027E-13, 0.0, 4.710787315787002E-12, -3.44058115331336E-12, 0.0 ], [ 0.0, 0.0, 0.0, -6.021183551752074E-12, 3.610667320685934E-12, 0.0, 6.400435736964027E-13, 8.851669397458295E-13, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 4.74095762648119E-12, -6.021183551752074E-12, -5.271116876315318E-12, 1.6001089342410069E-13, 6.400435736964027E-13, 8.851669397458295E-13, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 4.74095762648119E-12, -6.021183551752074E-12, 0.0, -4.2808812050765255E-12, 6.400435736964027E-13, 0.0 ], [ -4.525935182186913E-12, -1.0621947765798723E-11, 0.0, 4.04076772042572E-12, -6.6863736769562365E-12, 0.0, 0.0, 0.0, 0.0, 0.0 ] ]
    Finite-Difference Derivative Accuracy:
    absoluteTol: 9.4262e-13 +- 2.0573e-12 [0.0000e+00 - 1.6483e-11] (2916#)
    relativeTol: 3.6148e-12 +- 8.8759e-12 [8.4704e-15 - 1.2440e-10] (882#)
    
```

### Performance
Code from [LayerTestBase.java:144](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L144) executed in 0.17 seconds: 
```java
    getPerformanceTester().test(layer, inputPrototype);
```
Logging: 
```
    Evaluation performance: 6.4756 +- 2.1559 [3.7731 - 10.6611]
    Learning performance: 3.1241 +- 0.9363 [2.5905 - 10.9631]
    
```

