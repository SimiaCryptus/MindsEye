# SimpleConvolutionLayer
## Image
### Json Serialization
Code from [LayerTestBase.java:83](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L83) executed in 0.00 seconds: 
```java
    JsonObject json = layer.getJson();
    NNLayer echo = NNLayer.fromJson(json);
    assert (echo != null) : "Failed to deserialize";
    assert (layer != echo) : "Serialization did not copy";
    Assert.assertEquals("Serialization not equal", layer, echo);
    return new GsonBuilder().setPrettyPrinting().create().toJson(json);
```

Returns: 

```
    {
      "class": "com.simiacryptus.mindseye.layers.cudnn.f64.SimpleConvolutionLayer",
      "id": "370a9587-74a1-4959-b406-fa4500002b47",
      "isFrozen": false,
      "name": "SimpleConvolutionLayer/370a9587-74a1-4959-b406-fa4500002b47",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          0.304,
          -1.82,
          -1.692,
          -1.568,
          0.636,
          1.424,
          1.58,
          -0.34,
          1.944,
          -1.216,
          -0.632,
          0.66,
          0.868,
          0.824,
          1.648,
          -0.356,
          -1.852,
          0.92,
          -0.924,
          -0.796,
          1.64,
          1.8,
          1.62,
          1.176,
          -1.32,
          -0.4,
          1.72,
          1.28,
          -0.276,
          1.072,
          1.432,
          -0.576,
          0.276,
          1.12,
          0.984,
          -1.52,
          1.936,
          0.444,
          -1.504,
          -1.032,
          -0.336,
          1.356,
          -0.172,
          -1.544,
          -0.292,
          -0.584,
          1.02,
          -1.28,
          1.416,
          0.976,
          -1.292,
          1.032,
          1.284,
          -0.792,
          0.084,
          1.98,
          -1.664,
          1.388,
          -1.388,
          0.128,
          1.576,
          -0.08,
          -0.608,
          1.152,
          1.616,
          -1.78,
          1.928,
          1.216,
          1.412,
          1.86,
          1.224,
          0.908,
          -0.084,
          0.164,
          0.26,
          -1.244,
          1.712,
          1.368,
          1.82,
          -0.34,
          0.396
        ]
      },
      "strideX": 1,
      "strideY": 1,
      "simple": false
    }
```



### Example Input/Output Pair
Code from [LayerTestBase.java:120](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L120) executed in 0.00 seconds: 
```java
    SimpleEval eval = SimpleEval.run(layer, inputPrototype);
    return String.format("--------------------\nInput: \n[%s]\n--------------------\nOutput: \n%s",
      Arrays.stream(inputPrototype).map(t->t.prettyPrint()).reduce((a,b)->a+",\n"+b).get(),
      eval.getOutput().prettyPrint());
```

Returns: 

```
    --------------------
    Input: 
    [[
    	[ [ -1.472, 1.012, 1.832 ], [ -1.112, 1.324, -0.112 ], [ 0.144, -1.168, 0.032 ] ],
    	[ [ 1.792, 0.892, -0.276 ], [ 0.328, 1.548, 0.928 ], [ 1.024, 0.532, 1.764 ] ],
    	[ [ 0.96, -0.828, 0.804 ], [ 1.112, 0.712, 1.712 ], [ -1.912, -0.308, -0.908 ] ]
    ]]
    --------------------
    Output: 
    [
    	[ [ -1.0307679999999997, 7.2059999999999995, 12.612879999999999 ], [ 1.9587200000000005, 1.96744, 8.915216000000001 ], [ -2.0746400000000005, 1.532432, 5.5200000000000005 ] ],
    	[ [ 0.5249440000000002, 0.6707839999999998, 4.14504 ], [ 1.2963840000000009, 8.791200000000002, 14.979152000000003 ], [ -1.8808479999999996, -0.9318879999999997, 8.120032000000002 ] ],
    	[ [ 3.0800639999999997, 1.161728, 0.7216000000000001 ], [ 18.800624, -0.2240159999999999, -2.62664 ], [ 2.74504, -0.4489440000000004, 5.7943359999999995 ] ]
    ]
```



### Reference Implementation
Code from [LayerTestBase.java:131](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L131) executed in 0.01 seconds: 
```java
    System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(referenceLayer.getJson()));
    getEquivalencyTester().test(referenceLayer, layer, inputPrototype);
```
Logging: 
```
    {
      "class": "com.simiacryptus.mindseye.layers.aparapi.ConvolutionLayer",
      "id": "370a9587-74a1-4959-b406-fa4500002b48",
      "isFrozen": false,
      "name": "ConvolutionLayer/370a9587-74a1-4959-b406-fa4500002b48",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          0.304,
          -1.82,
          -1.692,
          -1.568,
          0.636,
          1.424,
          1.58,
          -0.34,
          1.944,
          1.28,
          -0.276,
          1.072,
          1.432,
          -0.576,
          0.276,
          1.12,
          0.984,
          -1.52,
          0.084,
          1.98,
          -1.664,
          1.388,
          -1.388,
          0.128,
          1.576,
          -0.08,
          -0.608,
          -1.216,
          -0.632,
          0.66,
          0.868,
          0.824,
          1.648,
          -0.356,
          -1.852,
          0.92,
          1.936,
          0.444,
          -1.504,
          -1.032,
          -0.336,
          1.356,
          -0.172,
          -1.544,
          -0.292,
          1.152,
          1.616,
          -1.78,
          1.928,
          1.216,
          1.412,
          1.86,
          1.224,
          0.908,
          -0.924,
          -0.796,
          1.64,
          1.8,
          1.62,
          1.176,
          -1.32,
          -0.4,
          1.72,
          -0.584,
          1.02,
          -1.28,
          1.416,
          0.976,
          -1.292,
          1.032,
          1.284,
          -0.792,
          -0.084,
          0.164,
          0.26,
          -1.244,
          1.712,
          1.368,
          1.82,
          -0.34,
          0.396
        ]
      },
      "skip": {
        "dimensions": [
          1,
          1
        ]
      },
      "simple": true
    }
    Inputs: [
    	[ [ -1.472, 1.012, 1.832 ], [ -1.112, 1.324, -0.112 ], [ 0.144, -1.168, 0.032 ] ],
    	[ [ 1.792, 0.892, -0.276 ], [ 0.328, 1.548, 0.928 ], [ 1.024, 0.532, 1.764 ] ],
    	[ [ 0.96, -0.828, 0.804 ], [ 1.112, 0.712, 1.712 ], [ -1.912, -0.308, -0.908 ] ]
    ]
    Error: [
    	[ [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0 ] ]
    ]
    Accuracy:
    absoluteTol: 0.0000e+00 +- 0.0000e+00 [0.0000e+00 - 0.0000e+00] (27#)
    relativeTol: 0.0000e+00 +- 0.0000e+00 [0.0000e+00 - 0.0000e+00] (27#)
    
```

### Batch Execution
Code from [LayerTestBase.java:138](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L138) executed in 0.01 seconds: 
```java
    BatchingTester batchingTester = getBatchingTester();
    return batchingTester==null?null:batchingTester.test(layer, inputPrototype);
```

Returns: 

```
    ToleranceStatistics{absoluteTol=3.2895e-18 +- 7.6371e-17 [0.0000e+00 - 1.7764e-15] (540#), relativeTol=1.7770e-19 +- 4.1255e-18 [0.0000e+00 - 9.5957e-17] (540#)}
```



### Differential Validation
Code from [LayerTestBase.java:144](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L144) executed in 0.15 seconds: 
```java
    return getDerivativeTester().test(layer, inputPrototype);
```
Logging: 
```
    Inputs: [
    	[ [ -1.472, 1.012, 1.832 ], [ -1.112, 1.324, -0.112 ], [ 0.144, -1.168, 0.032 ] ],
    	[ [ 1.792, 0.892, -0.276 ], [ 0.328, 1.548, 0.928 ], [ 1.024, 0.532, 1.764 ] ],
    	[ [ 0.96, -0.828, 0.804 ], [ 1.112, 0.712, 1.712 ], [ -1.912, -0.308, -0.908 ] ]
    ]
    Inputs Statistics: {meanExponent=-0.13516794812657063, negative=9, min=-0.908, max=-0.908, mean=0.38355555555555554, count=27.0, positive=18, stdDev=1.0603576382464808, zeros=0}
    Output: [
    	[ [ -1.0307679999999997, 7.2059999999999995, 12.612879999999999 ], [ 1.9587200000000005, 1.96744, 8.915216000000001 ], [ -2.0746400000000005, 1.532432, 5.5200000000000005 ] ],
    	[ [ 0.5249440000000002, 0.6707839999999998, 4.14504 ], [ 1.2963840000000009, 8.791200000000002, 14.979152000000003 ], [ -1.8808479999999996, -0.9318879999999997, 8.120032000000002 ] ],
    	[ [ 3.0800639999999997, 1.161728, 0.7216000000000001 ], [ 18.800624, -0.2240159999999999, -2.62664 ], [ 2.74504, -0.4489440000000004, 5.7943359999999995 ] ]
    ]
    Outputs Statistics: {meanExponent=0.3930097748158751, negative=7, min=5.7943359999999995, max=5.7943359999999995, mean=3.7528100740740746, count=27.0, positive=20, stdDev=5.308267450819947, zeros=0}
    Feedback for input 0
    Inputs Values: [
    	[ [ -1.472, 1.012, 1.832 ], [ -1.112, 1.324, -0.112 ], [ 0.144, -1.168, 0.032 ] ],
    	[ [ 1.792, 0.892, -0.276 ], [ 0.328, 1.548, 0.928 ], [ 1.024, 0.532, 1.764 ] ],
    	[ [ 0.96, -0.828, 0.804 ], [ 1.112, 0.712, 1.712 ], [ -1.912, -0.308, -0.908 ] ]
    ]
    Value Statistics: {meanExponent=-0.13516794812657063, negative=9, min=-0.908, max=-0.908, mean=0.38355555555555554, count=27.0, positive=18, stdDev=1.0603576382464808, zeros=0}
    Implemented Feedback: [ [ 0.636, 1.424, 0.0, -0.34, 1.944, 0.0, 0.0, 0.0, ... ], [ -1.568, 0.636, 1.424, 1.58, -0.34, 1.944, 0.0, 0.0, ... ], [ 0.0, -1.568, 0.636, 0.0, 1.58, -0.34, 0.0, 0.0, ... ], [ -1.82, -1.692, 0.0, 0.636, 1.424, 0.0, -0.34, 1.944, ... ], [ 0.304, -1.82, -1.692, -1.568, 0.636, 1.424, 1.58, -0.34, ... ], [ 0.0, 0.304, -1.82, 0.0, -1.568, 0.636, 0.0, 1.58, ... ], [ 0.0, 0.0, 0.0, -1.82
```
...[skipping 4637 bytes](etc/1.txt)...
```
    0.0, 1.7919999999982394, 0.9600000000098419, 0.0, 0.3279999999961092, 1.11200000000089, ... ], [ 0.0, 0.0, 0.0, -1.4719999999979194, 1.7919999999982394, 0.9599999999920783, -1.11200000000089, 0.3279999999961092, ... ], ... ]
    Measured Statistics: {meanExponent=-0.12434647361061302, negative=126, min=0.9280000000000399, max=0.9280000000000399, mean=0.10174485596697706, count=2187.0, positive=315, stdDev=0.4955268171691917, zeros=1746}
    Gradient Error: [ [ -3.890832100950092E-12, 8.899547765395255E-13, 0.0, 2.800426557314495E-12, 2.750688565811288E-12, 0.0, 0.0, 0.0, ... ], [ -8.899547765395255E-13, 5.500599975505338E-13, 8.899547765395255E-13, 4.140826570520062E-12, -6.0813576396867575E-12, 2.750688565811288E-12, 0.0, 0.0, ... ], [ 0.0, 3.5509373219611007E-12, 5.500599975505338E-13, 0.0, -4.74095762648119E-12, -6.0813576396867575E-12, 0.0, 0.0, ... ], [ -1.7605916724505732E-12, 9.601208716958354E-13, 0.0, 4.99095209605116E-12, -7.991829420461727E-12, 0.0, 2.800426557314495E-12, 2.750688565811288E-12, ... ], [ 2.0805579481475434E-12, -1.7605916724505732E-12, 9.601208716958354E-13, -8.899547765395255E-13, 1.3872736293052412E-11, -7.991829420461727E-12, 4.140826570520062E-12, 2.800426557314495E-12, ... ], [ 0.0, 2.0805579481475434E-12, -1.7605916724505732E-12, 0.0, 7.991829420461727E-12, -3.890832100950092E-12, 0.0, 4.140826570520062E-12, ... ], [ 0.0, 0.0, 0.0, -1.7605916724505732E-12, 9.841905068697088E-12, 0.0, -3.890832100950092E-12, 8.899547765395255E-13, ... ], [ 0.0, 0.0, 0.0, 2.0805579481475434E-12, -1.7605916724505732E-12, -7.921663325305417E-12, -8.899547765395255E-13, -3.890832100950092E-12, ... ], ... ]
    Error Statistics: {meanExponent=-11.813273451793064, negative=222, min=3.985700658404312E-14, max=3.985700658404312E-14, mean=-1.0110518579951194E-13, count=2187.0, positive=219, stdDev=2.1416134729343472E-12, zeros=1746}
    Finite-Difference Derivative Accuracy:
    absoluteTol: 9.9345e-13 +- 2.5636e-12 [0.0000e+00 - 2.8901e-11] (2916#)
    relativeTol: 3.4108e-12 +- 7.7330e-12 [3.3077e-15 - 7.8141e-11] (882#)
    
```

Returns: 

```
    ToleranceStatistics{absoluteTol=9.9345e-13 +- 2.5636e-12 [0.0000e+00 - 2.8901e-11] (2916#), relativeTol=3.4108e-12 +- 7.7330e-12 [3.3077e-15 - 7.8141e-11] (882#)}
```



### Performance
Code from [LayerTestBase.java:149](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L149) executed in 0.15 seconds: 
```java
    getPerformanceTester().test(layer, inputPrototype);
```
Logging: 
```
    Evaluation performance: 5.7629 +- 0.7752 [5.2208 - 10.4559]
    Learning performance: 3.5804 +- 0.3678 [3.1918 - 6.5859]
    
```

