# ConvolutionLayer
## AsymmetricTest
### Json Serialization
Code from [StandardLayerTests.java:69](../../../../../../../../src/main/java/com/simiacryptus/mindseye/test/StandardLayerTests.java#L69) executed in 0.00 seconds: 
```java
    JsonObject json = layer.getJson();
    NNLayer echo = NNLayer.fromJson(json);
    if ((echo == null)) throw new AssertionError("Failed to deserialize");
    if ((layer == echo)) throw new AssertionError("Serialization did not copy");
    if ((!layer.equals(echo))) throw new AssertionError("Serialization not equal");
    return new GsonBuilder().setPrettyPrinting().create().toJson(json);
```

Returns: 

```
    {
      "class": "com.simiacryptus.mindseye.layers.cudnn.ConvolutionLayer",
      "id": "f3298442-6efe-4377-bb98-141d634d752c",
      "isFrozen": false,
      "name": "ConvolutionLayer/f3298442-6efe-4377-bb98-141d634d752c",
      "filter": [
        [
          [
            1.344,
            1.8,
            -0.604
          ],
          [
            0.024,
            1.588,
            -1.152
          ],
          [
            0.472,
            0.116,
            -1.8
          ]
        ],
        [
          [
            -1.664,
            -0.384,
            1.232
          ],
          [
            1.444,
            1.512,
            0.428
          ],
          [
            -1.584,
            -0.356,
            -1.372
          ]
        ],
        [
          [
            -0.012,
            -1.412,
            1.028
          ],
          [
            1.892,
            -1.208,
            1.616
          ],
          [
            -0.372,
            -0.904,
            -1.252
          ]
        ],
        [
          [
            1.708,
            1.488,
            0.58
          ],
          [
            1.532,
            0.548,
            -1.632
          ],
          [
            -1.144,
            1.36,
            -1.504
          ]
        ],
        [
         
```
...[skipping 1761 bytes](etc/14.txt)...
```
    ,
        [
          [
            -0.628,
            -1.004,
            -0.18
          ],
          [
            -0.408,
            0.764,
            -0.46
          ],
          [
            -1.952,
            -0.244,
            1.916
          ]
        ],
        [
          [
            1.304,
            0.328,
            1.208
          ],
          [
            1.2,
            -1.344,
            1.452
          ],
          [
            -1.196,
            0.396,
            0.232
          ]
        ],
        [
          [
            -0.928,
            0.96,
            -0.1
          ],
          [
            -0.992,
            -1.312,
            0.292
          ],
          [
            0.168,
            -0.904,
            -1.924
          ]
        ],
        [
          [
            -0.36,
            1.948,
            -1.528
          ],
          [
            0.548,
            0.28,
            0.232
          ],
          [
            -1.144,
            0.224,
            -1.68
          ]
        ],
        [
          [
            0.968,
            -0.956,
            1.924
          ],
          [
            1.972,
            -0.948,
            1.852
          ],
          [
            1.936,
            1.964,
            1.788
          ]
        ]
      ],
      "strideX": 1,
      "strideY": 1
    }
```



### Example Input/Output Pair
Code from [StandardLayerTests.java:153](../../../../../../../../src/main/java/com/simiacryptus/mindseye/test/StandardLayerTests.java#L153) executed in 0.01 seconds: 
```java
    SimpleEval eval = SimpleEval.run(layer, inputPrototype);
    return String.format("--------------------\nInput: \n[%s]\n--------------------\nOutput: \n%s\n--------------------\nDerivative: \n%s",
      Arrays.stream(inputPrototype).map(t -> t.prettyPrint()).reduce((a, b) -> a + ",\n" + b).get(),
      eval.getOutput().prettyPrint(),
      Arrays.stream(eval.getDerivative()).map(t -> t.prettyPrint()).reduce((a, b) -> a + ",\n" + b).get());
```

Returns: 

```
    --------------------
    Input: 
    [[
    	[ [ 0.744, 1.592, 1.092 ], [ 0.892, -1.332, 1.052 ], [ -1.84, 1.408, 0.664 ], [ 0.396, -1.644, -0.016 ], [ -1.768, 1.524, 0.832 ] ],
    	[ [ -0.244, 1.724, 0.512 ], [ -1.444, 0.652, 0.28 ], [ 0.288, 1.96, 1.736 ], [ -0.448, -1.984, 0.148 ], [ 1.868, -0.188, -1.58 ] ],
    	[ [ -0.408, 1.828, -0.62 ], [ 0.748, -0.048, 0.984 ], [ 0.528, 1.836, 0.28 ], [ -0.532, -0.416, 1.076 ], [ 0.144, -0.604, 0.008 ] ],
    	[ [ 1.824, 0.212, -1.04 ], [ -0.796, -0.216, -0.604 ], [ -0.704, -0.296, -1.664 ], [ 0.696, 1.26, 0.348 ], [ -1.98, 0.32, 0.968 ] ],
    	[ [ -0.428, 1.244, 1.164 ], [ 1.244, -0.244, -1.48 ], [ -0.452, -1.752, 0.596 ], [ -0.936, -1.656, -1.856 ], [ -0.688, 0.7, -0.672 ] ]
    ]]
    --------------------
    Output: 
    [
    	[ [ -4.652896, 2.4618079999999996, -2.1258560000000006, -5.018736, -4.980944, 4.77584 ], [ 0.8765919999999991, -7.935695999999999, -1.844304, -5.658192000000002, 6.932128000000001, 2.372128 ], [ -9.660256, 1.7160159999999989, 6.308176, -3.431616, -7.204783999999997, 3.6405119999999997
```
...[skipping 2614 bytes](etc/15.txt)...
```
     4.98 ] ],
    	[ [ -3.54, 1.9040000000000004, 0.8479999999999994 ], [ 2.6439999999999992, -0.8200000000000016, 4.315999999999999 ], [ 2.6439999999999992, -0.8200000000000005, 4.316 ], [ 2.6439999999999992, -0.8199999999999987, 4.315999999999999 ], [ 13.008, -10.8, 7.472000000000001 ] ],
    	[ [ -3.54, 1.9040000000000004, 0.8479999999999994 ], [ 2.644, -0.8200000000000018, 4.315999999999999 ], [ 2.644, -0.8200000000000005, 4.316 ], [ 2.644, -0.8199999999999992, 4.315999999999999 ], [ 13.008, -10.8, 7.472000000000001 ] ],
    	[ [ -3.54, 1.9040000000000004, 0.8479999999999992 ], [ 2.644, -0.8200000000000005, 4.315999999999999 ], [ 2.6439999999999992, -0.8199999999999987, 4.316 ], [ 2.644, -0.8199999999999987, 4.315999999999999 ], [ 13.008, -10.8, 7.472000000000001 ] ],
    	[ [ 3.448, 3.816, -1.0760000000000005 ], [ 8.212, -1.739999999999999, -0.2520000000000002 ], [ 8.212, -1.7400000000000007, -0.25199999999999934 ], [ 8.212, -1.7400000000000009, -0.2519999999999998 ], [ 11.532, -10.816000000000003, 1.7360000000000007 ] ]
    ]
```



[GPU Log](etc/cuda.log)

### Reference Implementation
Code from [StandardLayerTests.java:93](../../../../../../../../src/main/java/com/simiacryptus/mindseye/test/StandardLayerTests.java#L93) executed in 0.02 seconds: 
```java
    System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(referenceLayer.getJson()));
    getEquivalencyTester().test(referenceLayer, layer, inputPrototype);
```
Logging: 
```
    {
      "class": "com.simiacryptus.mindseye.layers.aparapi.ConvolutionLayer",
      "id": "1304ec9b-e12f-44d3-a59a-37a87569cc78",
      "isFrozen": false,
      "name": "ConvolutionLayer/1304ec9b-e12f-44d3-a59a-37a87569cc78",
      "filter": [
        [
          [
            1.344,
            1.8,
            -0.604
          ],
          [
            0.024,
            1.588,
            -1.152
          ],
          [
            0.472,
            0.116,
            -1.8
          ]
        ],
        [
          [
            -1.664,
            -0.384,
            1.232
          ],
          [
            1.444,
            1.512,
            0.428
          ],
          [
            -1.584,
            -0.356,
            -1.372
          ]
        ],
        [
          [
            -0.012,
            -1.412,
            1.028
          ],
          [
            1.892,
            -1.208,
            1.616
          ],
          [
            -0.372,
            -0.904,
            -1.252
          ]
        ],
        [
          [
            1.708,
            1.488,
            0.58
          ],
          [
            1.532,
            0.548,
            -1.632
          ],
          [
            -1.144,
            1.36,
            -1.504
          ]
        ],
        [
       
```
...[skipping 3516 bytes](etc/16.txt)...
```
    , 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ] ],
    	[ [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 ] ]
    ]
    Accuracy:
    absoluteTol: 0.0000e+00 +- 0.0000e+00 [0.0000e+00 - 0.0000e+00] (150#)
    relativeTol: 0.0000e+00 +- 0.0000e+00 [0.0000e+00 - 0.0000e+00] (150#)
    
```

### Batch Execution
Code from [StandardLayerTests.java:102](../../../../../../../../src/main/java/com/simiacryptus/mindseye/test/StandardLayerTests.java#L102) executed in 0.05 seconds: 
```java
    return getBatchingTester().test(layer, inputPrototype);
```

Returns: 

```
    ToleranceStatistics{absoluteTol=4.5791e-17 +- 2.4397e-16 [0.0000e+00 - 3.7748e-15] (2250#), relativeTol=1.7775e-17 +- 1.2675e-16 [0.0000e+00 - 2.3017e-15] (2250#)}
```



### Differential Validation
Code from [StandardLayerTests.java:110](../../../../../../../../src/main/java/com/simiacryptus/mindseye/test/StandardLayerTests.java#L110) executed in 1.34 seconds: 
```java
    return getDerivativeTester().test(layer, inputPrototype);
```
Logging: 
```
    Inputs: [
    	[ [ -1.056, 0.492, -1.52 ], [ -1.188, -0.444, 1.256 ], [ 1.804, -0.624, -1.672 ], [ 0.096, -1.268, 1.768 ], [ -0.424, 0.708, 0.76 ] ],
    	[ [ -1.836, 1.856, 0.116 ], [ 0.368, -1.036, 1.544 ], [ 1.42, 0.928, 0.324 ], [ -0.392, 1.744, -0.504 ], [ 0.928, -0.324, 1.772 ] ],
    	[ [ 0.608, -0.188, 0.4 ], [ 1.308, -0.692, -0.3 ], [ 1.516, -0.632, 1.128 ], [ 0.876, 1.676, -0.148 ], [ 1.944, 1.212, 1.072 ] ],
    	[ [ 0.312, -0.788, 0.108 ], [ 1.048, -0.272, 0.276 ], [ 1.38, 1.028, -1.196 ], [ -0.716, -0.988, 0.136 ], [ -1.144, 1.06, -0.88 ] ],
    	[ [ 1.968, 1.576, -1.86 ], [ 0.056, 1.644, -1.496 ], [ 1.94, 0.224, -1.804 ], [ 1.32, 1.768, 1.792 ], [ -0.432, -1.972, 0.904 ] ]
    ]
    Inputs Statistics: {meanExponent=-0.11098919419926565, negative=30, min=0.904, max=0.904, mean=0.2715733333333333, count=75.0, positive=45, stdDev=1.1396941949293047, zeros=0}
    Output: [
    	[ [ -10.340016, -7.430272, 4.79792, -3.5868000000000007, -1.5085120000000007, 4.43624 ], [ 11.077551999999999, 1.3872, 3.721200000000001, 2.538576000000001, 
```
...[skipping 9582 bytes](etc/17.txt)...
```
    00596E-12, 7.931433287922118E-12, ... ], [ 5.161204796877428E-12, 2.715827562838058E-12, -2.80109269112927E-13, 8.998357614586894E-14, -1.1404210908949608E-12, 8.026690423434957E-12, 1.7003065622134272E-12, 8.746559032601908E-12, ... ], [ 0.0, 7.203126983768016E-13, 2.715827562838058E-12, -2.80109269112927E-13, 8.998357614586894E-14, 0.0, -9.736877970567548E-12, 1.7003065622134272E-12, ... ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 2.715827562838058E-12, -2.80109269112927E-13, 4.530875674646495E-12, ... ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 5.161204796877428E-12, 2.715827562838058E-12, -2.80109269112927E-13, ... ], ... ]
    Error Statistics: {meanExponent=-11.767304885408874, negative=1461, min=-5.301314942585122E-13, max=-5.301314942585122E-13, mean=-2.795401084820929E-15, count=24300.0, positive=1581, stdDev=1.6236747718179366E-12, zeros=21258}
    Finite-Difference Derivative Accuracy:
    absoluteTol: 5.6232e-13 +- 1.8429e-12 [0.0000e+00 - 3.0741e-11] (35550#)
    relativeTol: 4.1313e-12 +- 1.5582e-11 [2.4328e-15 - 6.6201e-10] (6084#)
    
```

Returns: 

```
    ToleranceStatistics{absoluteTol=5.6232e-13 +- 1.8429e-12 [0.0000e+00 - 3.0741e-11] (35550#), relativeTol=4.1313e-12 +- 1.5582e-11 [2.4328e-15 - 6.6201e-10] (6084#)}
```



### Performance
Code from [StandardLayerTests.java:120](../../../../../../../../src/main/java/com/simiacryptus/mindseye/test/StandardLayerTests.java#L120) executed in 0.03 seconds: 
```java
    getPerformanceTester().test(layer, permPrototype);
```
Logging: 
```
    Evaluation performance: 0.001570s +- 0.000249s [0.001266s - 0.001875s]
    Learning performance: 0.001394s +- 0.000086s [0.001229s - 0.001473s]
    
```

