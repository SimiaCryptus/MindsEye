# SimpleConvolutionLayer
## Image
### Json Serialization
Code from [LayerTestBase.java:83](../../../../../../../../../src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L83) executed in 0.00 seconds: 
```java
    JsonObject json = layer.getJson();
    NNLayer echo = NNLayer.fromJson(json);
    assert (echo != null) : "Failed to deserialize";
    assert (layer != echo) : "Serialization did not copy";
    Assert.assertEquals("Serialization not equal", layer, echo);
    return new GsonBuilder().setPrettyPrinting().create().toJson(json);
```

Returns: 

```
    {
      "class": "com.simiacryptus.mindseye.layers.cudnn.f32.SimpleConvolutionLayer",
      "id": "a864e734-2f23-44db-97c1-504000000405",
      "isFrozen": false,
      "name": "SimpleConvolutionLayer/a864e734-2f23-44db-97c1-504000000405",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          0.144,
          0.468,
          0.804,
          -0.2,
          -1.8,
          -1.688,
          -1.56,
          -1.292,
          -0.196,
          -1.876,
          0.472,
          1.832,
          0.976,
          -0.184,
          1.308,
          0.124,
          1.188,
          1.544,
          1.944,
          -0.156,
          0.268,
          0.816,
          -1.424,
          -0.156,
          -0.624,
          -0.516,
          1.112,
          -0.444,
          -1.008,
          0.46,
          -0.08,
          -1.48,
          0.096,
          -1.592,
          1.724,
          -1.792,
          -0.536,
          0.584,
          -0.384,
          0.064,
          0.74,
          0.684,
          -0.6,
          -1.152,
          1.048,
          1.288,
          1.948,
          0.8,
          -1.996,
          1.304,
          1.02,
          0.108,
          1.72,
          -1.008,
          1.784,
          -1.38,
          0.844,
          0.852,
          1.644,
          0.24,
          1.968,
          1.132,
          -1.116,
          -0.728,
          -1.012,
          1.312,
          -0.232,
          -0.784,
          1.644,
          -1.232,
          1.164,
          -0.104,
          -0.68,
          0.916,
          -1.652,
          1.756,
          -0.716,
          -0.244,
          -0.356,
          0.408,
          -0.68
        ]
      },
      "strideX": 1,
      "strideY": 1,
      "simple": false
    }
```



### Example Input/Output Pair
Code from [LayerTestBase.java:120](../../../../../../../../../src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L120) executed in 0.00 seconds: 
```java
    SimpleEval eval = SimpleEval.run(layer, inputPrototype);
    return String.format("--------------------\nInput: \n[%s]\n--------------------\nOutput: \n%s",
      Arrays.stream(inputPrototype).map(t->t.prettyPrint()).reduce((a,b)->a+",\n"+b).get(),
      eval.getOutput().prettyPrint());
```

Returns: 

```
    --------------------
    Input: 
    [[
    	[ [ 0.58, 1.46, -1.436 ], [ -1.828, 1.292, -0.804 ], [ -0.16, -1.18, 0.688 ], [ -1.292, 0.712, -0.744 ] ],
    	[ [ 0.372, -1.344, 1.58 ], [ -0.072, -1.676, 0.904 ], [ 0.496, 1.212, -0.492 ], [ 0.672, 0.344, -1.744 ] ],
    	[ [ -1.124, -0.224, 0.388 ], [ 1.8, 1.172, 0.848 ], [ -1.94, 0.968, -0.64 ], [ -1.4, -0.188, -1.672 ] ],
    	[ [ -0.56, 0.764, 1.764 ], [ 0.176, -0.512, -0.452 ], [ 0.624, -0.152, 0.032 ], [ -0.98, -0.496, 1.34 ] ]
    ]]
    --------------------
    Output: 
    [
    	[ [ 5.40628719329834, -1.794385313987732, 5.195919990539551 ], [ -0.5908491611480713, -2.75105619430542, 4.450207710266113 ], [ -0.23185551166534424, -5.98439884185791, 2.670048713684082 ], [ 0.16569650173187256, 5.615055561065674, -6.33512020111084 ] ],
    	[ [ -1.7697768211364746, -2.054655075073242, 9.084816932678223 ], [ 0.09769725799560547, 6.6803693771362305, -6.126798629760742 ], [ -7.366750717163086, -0.548271894454956, -5.368512153625488 ], [ 6.7441606521606445, -0.5650234222412109, -4.137168884277344 ] ],
    	[ [ -0.33896005153656006, 0.7742085456848145, -7.66491174697876 ], [ -4.742895603179932, -3.6344151496887207, -2.345872163772583 ], [ 5.422127723693848, 2.908446788787842, 6.082335948944092 ], [ 9.529999732971191, -9.936432838439941, 1.5568816661834717 ] ],
    	[ [ 3.632063865661621, 3.528496265411377, -1.9981287717819214 ], [ 0.06756854057312012, 0.7559679746627808, 5.167120933532715 ], [ 2.4773287773132324, -2.5084314346313477, 3.5312652587890625 ], [ 2.4850881099700928, 7.304272174835205, 0.6232643127441406 ] ]
    ]
```



### Reference Implementation
Code from [LayerTestBase.java:131](../../../../../../../../../src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L131) executed in 0.02 seconds: 
```java
    System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(referenceLayer.getJson()));
    getEquivalencyTester().test(referenceLayer, layer, inputPrototype);
```
Logging: 
```
    {
      "class": "com.simiacryptus.mindseye.layers.aparapi.ConvolutionLayer",
      "id": "a864e734-2f23-44db-97c1-504000000406",
      "isFrozen": false,
      "name": "ConvolutionLayer/a864e734-2f23-44db-97c1-504000000406",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          0.144,
          0.468,
          0.804,
          -0.2,
          -1.8,
          -1.688,
          -1.56,
          -1.292,
          -0.196,
          -0.444,
          -1.008,
          0.46,
          -0.08,
          -1.48,
          0.096,
          -1.592,
          1.724,
          -1.792,
          1.784,
          -1.38,
          0.844,
          0.852,
          1.644,
          0.24,
          1.968,
          1.132,
          -1.116,
          -1.876,
          0.472,
          1.832,
          0.976,
          -0.184,
          1.308,
          0.124,
          1.188,
          1.544,
          -0.536,
          0.584,
          -0.384,
          0.064,
          0.74,
          0.684,
          -0.6,
          -1.152,
          1.048,
          -0.728,
          -1.012,
          1.312,
          -0.232,
          -0.784,
          1.644,
          -1.232,
          1.164,
          -0.104,
          1.944,
          -0.156,
          0.268,
          0.816,
          -1.424,
          -0.156,
          -0.624,
          -0.516,
          1.112,
          1.288,
          1.948,
          0.8,
          -1.996,
          1.304,
          1.02,
          0.108,
          1.72,
          -1.008,
          -0.68,
          0.916,
          -1.652,
          1.756,
          -0.716,
          -0.244,
          -0.356,
          0.408,
          -0.68
        ]
      },
      "skip": {
        "dimensions": [
          1,
          1
        ]
      },
      "simple": true
    }
    Inputs: [
    	[ [ 0.58, 1.46, -1.436 ], [ -1.828, 1.292, -0.804 ], [ -0.16, -1.18, 0.688 ], [ -1.292, 0.712, -0.744 ] ],
    	[ [ 0.372, -1.344, 1.58 ], [ -0.072, -1.676, 0.904 ], [ 0.496, 1.212, -0.492 ], [ 0.672, 0.344, -1.744 ] ],
    	[ [ -1.124, -0.224, 0.388 ], [ 1.8, 1.172, 0.848 ], [ -1.94, 0.968, -0.64 ], [ -1.4, -0.188, -1.672 ] ],
    	[ [ -0.56, 0.764, 1.764 ], [ 0.176, -0.512, -0.452 ], [ 0.624, -0.152, 0.032 ], [ -0.98, -0.496, 1.34 ] ]
    ]
    Error: [
    	[ [ -8.067016592505638E-7, -1.313987731954569E-6, -9.460449312825858E-9 ], [ -1.161148071804341E-6, -1.9430541975395954E-7, -2.897338875484934E-7 ], [ 4.883346553519186E-7, 1.1581420897854855E-6, 7.136840816102108E-7 ], [ 5.017318721600716E-7, -4.3893432444264135E-7, -2.0111083909313265E-7 ] ],
    	[ [ -8.211364748156313E-7, 9.249267582944753E-7, 9.326782226537489E-7 ], [ 1.2579956050751129E-6, 1.3771362299408452E-6, 1.370239256281991E-6 ], [ 1.2828369122530603E-6, 1.0554504314974622E-7, -1.5362548921871166E-7 ], [ 6.521606445986095E-7, 5.77758789255256E-7, -8.8427734468155E-7 ] ],
    	[ [ -5.1536559964038275E-8, 5.456848147789017E-7, 2.5302124218029576E-7 ], [ 3.968200674719924E-7, 8.503112787217049E-7, -1.6377258260646954E-7 ], [ -2.7630615218043886E-7, -1.211212155460828E-6, -5.105590616949485E-8 ], [ -2.670288061779047E-7, -8.384399414751442E-7, 1.6661834723041835E-6 ] ],
    	[ [ -1.3433837864340603E-7, 2.654113764322119E-7, -7.717819214825283E-7 ], [ 5.405731196145291E-7, -2.533721843445136E-8, 9.33532715130525E-7 ], [ 7.773132324473409E-7, 5.653686523388046E-7, 1.2587890627635545E-6 ], [ 1.0997009169955163E-7, 1.748352049801838E-7, 3.127441404737752E-7 ] ]
    ]
    Accuracy:
    absoluteTol: 6.2623e-07 +- 4.4349e-07 [9.4604e-09 - 1.6662e-06] (48#)
    relativeTol: 3.9432e-07 +- 1.0763e-06 [9.1037e-10 - 6.4383e-06] (48#)
    
```

### Batch Execution
Code from [LayerTestBase.java:138](../../../../../../../../../src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L138) executed in 0.02 seconds: 
```java
    BatchingTester batchingTester = getBatchingTester();
    return batchingTester==null?null:batchingTester.test(layer, inputPrototype);
```

Returns: 

```
    ToleranceStatistics{absoluteTol=4.3167e-07 +- 6.9260e-07 [0.0000e+00 - 3.8147e-06] (960#), relativeTol=1.8822e-07 +- 1.5479e-06 [0.0000e+00 - 3.2216e-05] (960#)}
```



### Differential Validation
Code from [LayerTestBase.java:144](../../../../../../../../../src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L144) executed in 0.24 seconds: 
```java
    return getDerivativeTester().test(layer, inputPrototype);
```
Logging: 
```
    Inputs: [
    	[ [ 0.58, 1.46, -1.436 ], [ -1.828, 1.292, -0.804 ], [ -0.16, -1.18, 0.688 ], [ -1.292, 0.712, -0.744 ] ],
    	[ [ 0.372, -1.344, 1.58 ], [ -0.072, -1.676, 0.904 ], [ 0.496, 1.212, -0.492 ], [ 0.672, 0.344, -1.744 ] ],
    	[ [ -1.124, -0.224, 0.388 ], [ 1.8, 1.172, 0.848 ], [ -1.94, 0.968, -0.64 ], [ -1.4, -0.188, -1.672 ] ],
    	[ [ -0.56, 0.764, 1.764 ], [ 0.176, -0.512, -0.452 ], [ 0.624, -0.152, 0.032 ], [ -0.98, -0.496, 1.34 ] ]
    ]
    Inputs Statistics: {meanExponent=-0.16513235987275673, negative=25, min=1.34, max=1.34, mean=-0.06091666666666673, count=48.0, positive=23, stdDev=1.049714005363154, zeros=0}
    Output: [
    	[ [ 5.40628719329834, -1.794385313987732, 5.195919990539551 ], [ -0.5908491611480713, -2.75105619430542, 4.450207710266113 ], [ -0.23185551166534424, -5.98439884185791, 2.670048713684082 ], [ 0.16569650173187256, 5.615055561065674, -6.33512020111084 ] ],
    	[ [ -1.7697768211364746, -2.054655075073242, 9.084816932678223 ], [ 0.09769725799560547, 6.6803693771362305, -6.126798629760742 ], [ -7.366750717163086, -0.548271894454956, -5.368512153625488 ], [ 6.7441606521606445, -0.5650234222412109, -4.137168884277344 ] ],
    	[ [ -0.33896005153656006, 0.7742085456848145, -7.66491174697876 ], [ -4.742895603179932, -3.6344151496887207, -2.345872163772583 ], [ 5.422127723693848, 2.908446788787842, 6.082335948944092 ], [ 9.529999732971191, -9.936432838439941, 1.5568816661834717 ] ],
    	[ [ 3.632063865661621, 3.528496265411377, -1.9981287717819214 ], [ 0.06756854057312012, 0.7559679746627808, 5.167120933532715 ], [ 2.4773287773132324, -2.5084314346313477, 3.5312652587890625 ], [ 2.4850881099700928, 7.304272174835205, 0.6232643127441406 ] ]
    ]
    Outputs Statistics: {meanExponent=0.37169319479288165, negative=22, min=0.6232643127441406, max=0.6232643127441406, mean=0.48254220684369403, count=48.0, positive=26, stdDev=4.605877168263748, zeros=0}
    Feedback for input 0
    Inputs Values: [
    	[ [ 0.58, 1.46, -1.436 ], [ -1.828, 1.292, -0.804 ], [ -0.16, -1.18, 0.688 ], [ -1.292, 0.712, -0.744 ] ],
    	[ [ 0.372, -1.344, 1.58 ], [
```
...[skipping 7182 bytes](etc/1.txt)...
```
    d Statistics: {meanExponent=-0.8303828831629777, negative=570, min=-0.6399154663085938, max=-0.6399154663085938, mean=-0.009283500075830843, count=3888.0, positive=567, stdDev=0.5105751266621077, zeros=2751}
    Gradient Error: [ [ 4.744231700897217E-4, 6.031990051269531E-5, -4.0471553802490234E-4, -7.152557373046875E-4, 1.4907121658325195E-4, -7.271766662597656E-4, -2.970099449157715E-4, 0.0, ... ], [ -1.9371509552001953E-4, 4.744231700897217E-4, -4.165172576904297E-4, -5.239248275756836E-4, -2.1728873252868652E-4, -8.934736251831055E-5, -2.503395080566406E-4, -2.970099449157715E-4, ... ], [ 0.0, -1.9371509552001953E-4, 1.1679530143737793E-4, -6.549358367919922E-4, 7.152557373046875E-4, -2.1728873252868652E-4, 3.8748979568481445E-4, -2.503395080566406E-4, ... ], [ -6.702542304992676E-5, -3.820657730102539E-4, -5.220770835876465E-4, -7.152557373046875E-4, 2.3600459098815918E-4, -4.165172576904297E-4, -4.7087669372558594E-5, -2.384185791015625E-4, ... ], [ 3.108382225036621E-4, -6.702542304992676E-5, -2.4437904357910156E-5, -2.83658504486084E-4, 2.8312206268310547E-4, -4.792511463165283E-4, -4.165172576904297E-4, -4.7087669372558594E-5, ... ], [ 9.5367431640625E-4, -1.659989356994629E-4, 5.218386650085449E-5, -1.436471939086914E-4, 2.384185791015625E-4, -1.9371509552001953E-4, 9.512603282928467E-4, -2.9730796813964844E-4, ... ], [ 0.0, 4.76837158203125E-4, -4.76837158203125E-4, -7.152557373046875E-4, 1.7139315605163574E-4, -3.820657730102539E-4, -2.83658504486084E-4, -1.1920928955078125E-4, ... ], [ 0.0, 0.0, 0.0, 0.0, 5.492568016052246E-4, -6.702542304992676E-5, -3.820657730102539E-4, -1.6444921493530273E-4, ... ], ... ]
    Error Statistics: {meanExponent=-3.594420662307082, negative=589, min=8.45193862915039E-5, max=8.45193862915039E-5, mean=-2.6369440549440344E-6, count=3888.0, positive=548, stdDev=2.591230070777706E-4, zeros=2751}
    Finite-Difference Derivative Accuracy:
    absoluteTol: 1.2706e-04 +- 2.5392e-04 [0.0000e+00 - 1.9073e-03] (6192#)
    relativeTol: 1.1675e-01 +- 3.2050e-01 [3.7724e-08 - 1.0000e+00] (2037#)
    
```

Returns: 

```
    ToleranceStatistics{absoluteTol=1.2706e-04 +- 2.5392e-04 [0.0000e+00 - 1.9073e-03] (6192#), relativeTol=1.1675e-01 +- 3.2050e-01 [3.7724e-08 - 1.0000e+00] (2037#)}
```



### Performance
Code from [LayerTestBase.java:149](../../../../../../../../../src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L149) executed in 0.16 seconds: 
```java
    getPerformanceTester().test(layer, inputPrototype);
```
Logging: 
```
    Evaluation performance: 5.7969 +- 1.0775 [4.8902 - 11.9691]
    Learning performance: 4.1560 +- 0.6145 [3.6278 - 7.3411]
    
```

