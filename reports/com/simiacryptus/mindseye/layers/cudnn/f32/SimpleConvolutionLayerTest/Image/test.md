# SimpleConvolutionLayer
## Image
### Json Serialization
Code from [LayerTestBase.java:83](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L83) executed in 0.00 seconds: 
```java
    JsonObject json = layer.getJson();
    NNLayer echo = NNLayer.fromJson(json);
    assert (echo != null) : "Failed to deserialize";
    assert (layer != echo) : "Serialization did not copy";
    Assert.assertEquals("Serialization not equal", layer, echo);
    return new GsonBuilder().setPrettyPrinting().create().toJson(json);
```

Returns: 

```
    {
      "class": "com.simiacryptus.mindseye.layers.cudnn.f32.SimpleConvolutionLayer",
      "id": "370a9587-74a1-4959-b406-fa4500000405",
      "isFrozen": false,
      "name": "SimpleConvolutionLayer/370a9587-74a1-4959-b406-fa4500000405",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          -1.224,
          1.516,
          1.468,
          0.988,
          -0.136,
          0.572,
          1.728,
          -0.38,
          0.772,
          0.596,
          -0.656,
          0.86,
          -1.788,
          -1.16,
          -0.812,
          0.972,
          0.848,
          0.524,
          -1.644,
          -1.692,
          -0.176,
          -0.864,
          0.94,
          0.364,
          0.296,
          1.32,
          -0.628,
          1.712,
          0.776,
          -0.112,
          0.328,
          0.448,
          -0.224,
          0.056,
          1.896,
          -1.38,
          0.056,
          -0.02,
          -1.68,
          -2.0,
          -1.3,
          0.544,
          -1.916,
          1.24,
          0.368,
          1.736,
          1.844,
          0.072,
          0.016,
          -1.144,
          0.228,
          1.048,
          -1.368,
          -0.404,
          -0.848,
          0.564,
          1.484,
          -0.824,
          -0.62,
          1.256,
          0.988,
          -0.34,
          1.532,
          -1.632,
          1.248,
          -1.276,
          0.476,
          -0.48,
          -1.476,
          -0.984,
          0.456,
          -1.536,
          -1.44,
          -1.204,
          0.228,
          -0.184,
          -0.008,
          1.784,
          -0.44,
          0.152,
          -1.512
        ]
      },
      "strideX": 1,
      "strideY": 1,
      "simple": false
    }
```



### Example Input/Output Pair
Code from [LayerTestBase.java:120](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L120) executed in 0.00 seconds: 
```java
    SimpleEval eval = SimpleEval.run(layer, inputPrototype);
    return String.format("--------------------\nInput: \n[%s]\n--------------------\nOutput: \n%s",
      Arrays.stream(inputPrototype).map(t->t.prettyPrint()).reduce((a,b)->a+",\n"+b).get(),
      eval.getOutput().prettyPrint());
```

Returns: 

```
    --------------------
    Input: 
    [[
    	[ [ -0.696, 0.828, -1.72 ], [ 1.596, 1.312, 1.3 ], [ -0.44, -0.604, 1.996 ], [ 0.236, 1.988, 0.956 ] ],
    	[ [ 0.6, -0.004, 0.824 ], [ -0.976, 1.82, -1.736 ], [ 1.86, -0.06, 0.168 ], [ 0.688, 0.564, 1.192 ] ],
    	[ [ 1.756, 1.384, 0.436 ], [ -1.072, -0.116, 1.36 ], [ 1.528, 1.86, 0.876 ], [ -0.372, 1.728, -0.18 ] ],
    	[ [ 0.9, -1.132, 1.072 ], [ -0.824, 1.02, 1.312 ], [ -1.732, 1.22, 1.572 ], [ -0.44, -0.948, 1.152 ] ]
    ]]
    --------------------
    Output: 
    [
    	[ [ 1.8979843854904175, -0.17577600479125977, 0.7294899225234985 ], [ -9.499120712280273, 3.3230557441711426, -4.179184913635254 ], [ 1.1977603435516357, 1.7358078956604004, -4.54070520401001 ], [ 2.697103977203369, -8.374143600463867, 0.37438440322875977 ] ],
    	[ [ 0.39807987213134766, -8.404607772827148, -2.468081474304199 ], [ -0.1182718276977539, 6.809391975402832, -1.1742238998413086 ], [ -0.14452838897705078, -1.566206455230713, -4.49937629699707 ], [ -1.7982730865478516, -3.882206916809082, -4.581536293029785 ] ],
    	[ [ -2.753664255142212, 0.6454243659973145, -10.413183212280273 ], [ -0.5568643808364868, 5.7683844566345215, -1.8479845523834229 ], [ -4.2964959144592285, -8.47425651550293, 2.0511534214019775 ], [ 0.6215357780456543, 0.5487675666809082, 0.8062586784362793 ] ],
    	[ [ -3.81329607963562, 3.2797608375549316, -0.9868155717849731 ], [ -0.3389917016029358, -7.66539192199707, -0.7453598976135254 ], [ 0.12539196014404297, -5.568624496459961, -6.979776382446289 ], [ 5.93284797668457, -4.999920845031738, -3.0766873359680176 ] ]
    ]
```



### Reference Implementation
Code from [LayerTestBase.java:131](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L131) executed in 0.02 seconds: 
```java
    System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(referenceLayer.getJson()));
    getEquivalencyTester().test(referenceLayer, layer, inputPrototype);
```
Logging: 
```
    {
      "class": "com.simiacryptus.mindseye.layers.aparapi.ConvolutionLayer",
      "id": "370a9587-74a1-4959-b406-fa4500000406",
      "isFrozen": false,
      "name": "ConvolutionLayer/370a9587-74a1-4959-b406-fa4500000406",
      "filter": {
        "dimensions": [
          3,
          3,
          9
        ],
        "data": [
          -1.224,
          1.516,
          1.468,
          0.988,
          -0.136,
          0.572,
          1.728,
          -0.38,
          0.772,
          1.712,
          0.776,
          -0.112,
          0.328,
          0.448,
          -0.224,
          0.056,
          1.896,
          -1.38,
          -0.848,
          0.564,
          1.484,
          -0.824,
          -0.62,
          1.256,
          0.988,
          -0.34,
          1.532,
          0.596,
          -0.656,
          0.86,
          -1.788,
          -1.16,
          -0.812,
          0.972,
          0.848,
          0.524,
          0.056,
          -0.02,
          -1.68,
          -2.0,
          -1.3,
          0.544,
          -1.916,
          1.24,
          0.368,
          -1.632,
          1.248,
          -1.276,
          0.476,
          -0.48,
          -1.476,
          -0.984,
          0.456,
          -1.536,
          -1.644,
          -1.692,
          -0.176,
          -0.864,
          0.94,
          0.364,
          0.296,
          1.32,
          -0.628,
          1.736,
          1.844,
          0.072,
          0.016,
          -1.144,
          0.228,
          1.048,
          -1.368,
          -0.404,
          -1.44,
          -1.204,
          0.228,
          -0.184,
          -0.008,
          1.784,
          -0.44,
          0.152,
          -1.512
        ]
      },
      "skip": {
        "dimensions": [
          1,
          1
        ]
      },
      "simple": true
    }
    Inputs: [
    	[ [ -0.696, 0.828, -1.72 ], [ 1.596, 1.312, 1.3 ], [ -0.44, -0.604, 1.996 ], [ 0.236, 1.988, 0.956 ] ],
    	[ [ 0.6, -0.004, 0.824 ], [ -0.976, 1.82, -1.736 ], [ 1.86, -0.06, 0.168 ], [ 0.688, 0.564, 1.192 ] ],
    	[ [ 1.756, 1.384, 0.436 ], [ -1.072, -0.116, 1.36 ], [ 1.528, 1.86, 0.876 ], [ -0.372, 1.728, -0.18 ] ],
    	[ [ 0.9, -1.132, 1.072 ], [ -0.824, 1.02, 1.312 ], [ -1.732, 1.22, 1.572 ], [ -0.44, -0.948, 1.152 ] ]
    ]
    Error: [
    	[ [ 3.85490418919332E-7, -4.791259555769756E-9, 1.922523498509854E-6 ], [ -7.12280273873489E-7, -2.558288576537393E-7, -9.13635253674272E-7 ], [ 3.435516351402157E-7, -1.043395980726558E-7, -1.2040100108023921E-6 ], [ -2.2796630805288487E-8, 3.995361321784685E-7, 4.032287596600348E-7 ] ],
    	[ [ -1.2786865299929673E-7, 2.271728511971105E-7, -1.4743041991671646E-6 ], [ 1.723022462762902E-7, -2.4597167858075863E-8, 1.0015869178481296E-7 ], [ -3.889770495424383E-7, 1.5447692891523701E-6, -2.9699706960428784E-7 ], [ -1.0865478523580663E-6, 1.0831909178499188E-6, -2.930297844372376E-7 ] ],
    	[ [ -2.5514221180245045E-7, 3.6599731367825683E-7, 7.877197294448024E-7 ], [ -3.80836487567926E-7, 4.5663452041821984E-7, -5.523834221143886E-7 ], [ 8.554077002287386E-8, -5.155029274561684E-7, 1.4214019778968634E-6 ], [ -2.2195434623561994E-7, -4.333190918304197E-7, 2.6784362789911142E-6 ] ],
    	[ [ -7.963562120849588E-8, 8.37554930743778E-7, 4.2821502665990607E-7 ], [ 2.9839706405798694E-7, 7.800292944892817E-8, 1.023864742988323E-7 ], [ -3.985595697919564E-8, -4.964599611412268E-7, -3.8244628797201585E-7 ], [ -2.3315429587000835E-8, -8.450317379171679E-7, 6.640319827333485E-7 ] ]
    ]
    Accuracy:
    absoluteTol: 5.4004e-07 +- 5.4450e-07 [4.7913e-09 - 2.6784e-06] (48#)
    relativeTol: 2.2700e-07 +- 3.5455e-07 [1.8061e-09 - 1.6610e-06] (48#)
    
```

### Batch Execution
Code from [LayerTestBase.java:138](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L138) executed in 0.02 seconds: 
```java
    BatchingTester batchingTester = getBatchingTester();
    return batchingTester==null?null:batchingTester.test(layer, inputPrototype);
```

Returns: 

```
    ToleranceStatistics{absoluteTol=4.2127e-07 +- 6.8232e-07 [0.0000e+00 - 4.7684e-06] (960#), relativeTol=1.7804e-07 +- 1.5536e-06 [0.0000e+00 - 4.0439e-05] (960#)}
```



### Differential Validation
Code from [LayerTestBase.java:144](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L144) executed in 0.25 seconds: 
```java
    return getDerivativeTester().test(layer, inputPrototype);
```
Logging: 
```
    Inputs: [
    	[ [ -0.696, 0.828, -1.72 ], [ 1.596, 1.312, 1.3 ], [ -0.44, -0.604, 1.996 ], [ 0.236, 1.988, 0.956 ] ],
    	[ [ 0.6, -0.004, 0.824 ], [ -0.976, 1.82, -1.736 ], [ 1.86, -0.06, 0.168 ], [ 0.688, 0.564, 1.192 ] ],
    	[ [ 1.756, 1.384, 0.436 ], [ -1.072, -0.116, 1.36 ], [ 1.528, 1.86, 0.876 ], [ -0.372, 1.728, -0.18 ] ],
    	[ [ 0.9, -1.132, 1.072 ], [ -0.824, 1.02, 1.312 ], [ -1.732, 1.22, 1.572 ], [ -0.44, -0.948, 1.152 ] ]
    ]
    Inputs Statistics: {meanExponent=-0.11401045346527566, negative=17, min=1.152, max=1.152, mean=0.5010833333333333, count=48.0, positive=31, stdDev=1.0752955375409847, zeros=0}
    Output: [
    	[ [ 1.8979843854904175, -0.17577600479125977, 0.7294899225234985 ], [ -9.499120712280273, 3.3230557441711426, -4.179184913635254 ], [ 1.1977603435516357, 1.7358078956604004, -4.54070520401001 ], [ 2.697103977203369, -8.374143600463867, 0.37438440322875977 ] ],
    	[ [ 0.39807987213134766, -8.404607772827148, -2.468081474304199 ], [ -0.1182718276977539, 6.809391975402832, -1.1742238998413086 ], [ -0.14452838897705078, -1.566206455230713, -4.49937629699707 ], [ -1.7982730865478516, -3.882206916809082, -4.581536293029785 ] ],
    	[ [ -2.753664255142212, 0.6454243659973145, -10.413183212280273 ], [ -0.5568643808364868, 5.7683844566345215, -1.8479845523834229 ], [ -4.2964959144592285, -8.47425651550293, 2.0511534214019775 ], [ 0.6215357780456543, 0.5487675666809082, 0.8062586784362793 ] ],
    	[ [ -3.81329607963562, 3.2797608375549316, -0.9868155717849731 ], [ -0.3389917016029358, -7.66539192199707, -0.7453598976135254 ], [ 0.12539196014404297, -5.568624496459961, -6.979776382446289 ], [ 5.93284797668457, -4.999920845031738, -3.0766873359680176 ] ]
    ]
    Outputs Statistics: {meanExponent=0.27488009363223015, negative=30, min=-3.0766873359680176, max=-3.0766873359680176, mean=-1.6454369239509106, count=48.0, positive=18, stdDev=3.9962872556830678, zeros=0}
    Feedback for input 0
    Inputs Values: [
    	[ [ -0.696, 0.828, -1.72 ], [ 1.596, 1.312, 1.3 ], [ -0.44, -0.604, 1.996 ], [ 0.236, 1.988, 0.956 ] ],
    	[ [ 0.6, -0.004, 0.824 
```
...[skipping 7097 bytes](etc/1.txt)...
```
    . ]
    Measured Statistics: {meanExponent=-0.8317016284028802, negative=440, min=0.8754730224609375, max=0.8754730224609375, mean=0.12074168694853292, count=3888.0, positive=714, stdDev=0.5679532857900659, zeros=2734}
    Gradient Error: [ [ 1.5276670455932617E-4, -1.6832351684570312E-4, 2.5391578674316406E-5, 2.384185791015625E-4, 6.185770034790039E-4, 2.630949020385742E-4, -1.1098384857177734E-4, -5.9604644775390625E-5, ... ], [ -2.5987625122070312E-5, -8.565187454223633E-5, 7.009506225585938E-5, 2.5391578674316406E-5, 0.001309812068939209, 6.185770034790039E-4, 2.467632293701172E-5, -1.1098384857177734E-4, ... ], [ 1.1920928955078125E-4, -2.644062042236328E-4, 3.9118528366088867E-4, 7.009506225585938E-5, 9.5367431640625E-4, 3.56137752532959E-4, -9.66787338256836E-5, 2.467632293701172E-5, ... ], [ 9.953975677490234E-5, -2.856254577636719E-4, 3.0159950256347656E-5, -2.384185791015625E-4, 0.0013448596000671387, 7.009506225585938E-5, 2.5391578674316406E-5, 1.1920928955078125E-4, ... ], [ -1.8227100372314453E-4, -1.3887882232666016E-4, -4.7206878662109375E-5, -2.0825862884521484E-4, 4.508495330810547E-4, 3.9118528366088867E-4, 7.009506225585938E-5, 2.5391578674316406E-5, ... ], [ -1.1920928955078125E-4, -1.8227100372314453E-4, 9.953975677490234E-5, -2.856254577636719E-4, 9.5367431640625E-4, 4.508495330810547E-4, -8.565187454223633E-5, 7.009506225585938E-5, ... ], [ 0.0, 0.0, 0.0, 2.384185791015625E-4, 8.147954940795898E-4, 1.9121170043945312E-4, -2.0825862884521484E-4, 1.1920928955078125E-4, ... ], [ 0.0, 0.0, 0.0, 0.0, 7.714033126831055E-4, 3.3795833587646484E-4, 1.9121170043945312E-4, -2.0825862884521484E-4, ... ], ... ]
    Error Statistics: {meanExponent=-3.537838247243254, negative=509, min=-5.269646644592285E-4, max=-5.269646644592285E-4, mean=1.9463157394341358E-5, count=3888.0, positive=645, stdDev=3.05311952604893E-4, zeros=2734}
    Finite-Difference Derivative Accuracy:
    absoluteTol: 1.3634e-04 +- 2.8149e-04 [0.0000e+00 - 2.9161e-03] (6192#)
    relativeTol: 1.2474e-01 +- 3.2894e-01 [4.2464e-07 - 1.0000e+00] (2054#)
    
```

Returns: 

```
    ToleranceStatistics{absoluteTol=1.3634e-04 +- 2.8149e-04 [0.0000e+00 - 2.9161e-03] (6192#), relativeTol=1.2474e-01 +- 3.2894e-01 [4.2464e-07 - 1.0000e+00] (2054#)}
```



### Performance
Code from [LayerTestBase.java:149](../../../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L149) executed in 0.16 seconds: 
```java
    getPerformanceTester().test(layer, inputPrototype);
```
Logging: 
```
    Evaluation performance: 5.9030 +- 1.2976 [5.0071 - 13.1318]
    Learning performance: 4.0348 +- 0.7209 [3.4995 - 9.4328]
    
```

