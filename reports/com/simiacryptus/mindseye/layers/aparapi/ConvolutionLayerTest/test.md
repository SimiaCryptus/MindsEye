# ConvolutionLayer
## ConvolutionLayerTest
### Json Serialization
Code from [LayerTestBase.java:84](../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L84) executed in 0.04 seconds: 
```java
    JsonObject json = layer.getJson();
    NNLayer echo = NNLayer.fromJson(json);
    assert (echo != null) : "Failed to deserialize";
    assert (layer != echo) : "Serialization did not copy";
    Assert.assertEquals("Serialization not equal", layer, echo);
    return new GsonBuilder().setPrettyPrinting().create().toJson(json);
```

Returns: 

```
    {
      "class": "com.simiacryptus.mindseye.layers.aparapi.ConvolutionLayer",
      "id": "e2d0bffa-47dc-4875-864f-3d3d00000001",
      "isFrozen": false,
      "name": "ConvolutionLayer/e2d0bffa-47dc-4875-864f-3d3d00000001",
      "filter": {
        "dimensions": [
          3,
          3,
          4
        ],
        "data": [
          -0.044,
          -1.704,
          -0.828,
          1.132,
          1.884,
          1.516,
          0.804,
          -1.404,
          0.228,
          0.824,
          -0.136,
          0.724,
          0.62,
          0.328,
          0.7,
          -1.052,
          -0.476,
          -1.648,
          -1.004,
          1.016,
          -1.368,
          -0.6,
          1.92,
          0.02,
          1.664,
          -1.668,
          0.456,
          -1.688,
          0.756,
          -1.336,
          -0.744,
          1.68,
          -1.396,
          -0.596,
          0.044,
          -0.076
        ]
      },
      "skip": {
        "dimensions": [
          1,
          1
        ]
      },
      "simple": true
    }
```



### Example Input/Output Pair
Code from [LayerTestBase.java:121](../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L121) executed in 0.31 seconds: 
```java
    SimpleEval eval = SimpleEval.run(layer, inputPrototype);
    return String.format("--------------------\nInput: \n[%s]\n--------------------\nOutput: \n%s",
      Arrays.stream(inputPrototype).map(t->t.prettyPrint()).reduce((a,b)->a+",\n"+b).get(),
      eval.getOutput().prettyPrint());
```

Returns: 

```
    --------------------
    Input: 
    [[
    	[ [ -1.288, 0.08 ], [ -1.6, -1.588 ], [ 0.86, 0.72 ] ],
    	[ [ 1.884, 1.48 ], [ 1.88, 0.032 ], [ 1.932, 0.176 ] ],
    	[ [ 1.828, -1.092 ], [ 0.368, -1.612 ], [ 0.264, -1.672 ] ]
    ]]
    --------------------
    Output: 
    [
    	[ [ -0.030160000000000315, 0.2910719999999996 ], [ 0.7023359999999995, -2.576048 ], [ 11.544016, 1.2534720000000001 ] ],
    	[ [ 9.092976, 7.792848 ], [ -6.331840000000001, 5.778288 ], [ 0.42969599999999947, 4.371536000000001 ] ],
    	[ [ 0.36777600000000005, -1.932608 ], [ -3.180704000000001, -5.5879199999999996 ], [ 2.8349440000000006, -4.962432 ] ]
    ]
```



### Differential Validation
Code from [LayerTestBase.java:139](../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L139) executed in 0.57 seconds: 
```java
    getDerivativeTester().test(layer, inputPrototype);
```
Logging: 
```
    Feedback for input 0
    Inputs: [
    	[ [ -1.288, 0.08 ], [ -1.6, -1.588 ], [ 0.86, 0.72 ] ],
    	[ [ 1.884, 1.48 ], [ 1.88, 0.032 ], [ 1.932, 0.176 ] ],
    	[ [ 1.828, -1.092 ], [ 0.368, -1.612 ], [ 0.264, -1.672 ] ]
    ]
    Output: [
    	[ [ -0.030160000000000315, 0.2910719999999996 ], [ 0.7023359999999995, -2.576048 ], [ 11.544016, 1.2534720000000001 ] ],
    	[ [ 9.092976, 7.792848 ], [ -6.331840000000001, 5.778288 ], [ 0.42969599999999947, 4.371536000000001 ] ],
    	[ [ 0.36777600000000005, -1.932608 ], [ -3.180704000000001, -5.5879199999999996 ], [ 2.8349440000000006, -4.962432 ] ]
    ]
    Measured: [ [ 1.8839999999986645, 1.5159999999880824, 0.0, -1.404000000000405, 0.22799999999989495, 0.0, 0.0, 0.0, 0.0, 0.3280000000005501 ], [ 1.1320000000036856, 1.8839999999897827, 1.5159999999969642, 0.8039999999986946, -1.4039999999937436, 0.22799999999989495, 0.0, 0.0, 0.0, 0.6200000000022854 ], [ 0.0, 1.1319999999948038, 1.8839999999986645, 0.0, 0.8040000000075764, -1.4039999999937436, 0.0, 0.0, 0.0, 0.0 ], [ -1.7040000000001498, -0.8280000000127075, 0.0, 1.8839999999986645, 1.5159999999969642, 0.0, -1.4039999999937436, 0.22799999999989495, 0.0, -0.13599999999946988 ], [ -0.0439999999990448, -1.7040000000001498, -0.8280000000038257, 1.1319999999992447, 1.8839999999986645, 1.516000000005846, 0.8039999999986946, -1.4039999999981845, 0.22799999999989495, 0.8240000000014902 ], [ 0.0, -0.0439999999990448, -1.7040000000001498, 0.0, 1.1320000000036856, 1.8840000000075463, 0.0, 0.8039999999986946, -1.4040000000026254, 0.0 ], [ 0.0, 0.0, 0.0, -1.7040000000001498, -0.8279999999949439, 0.0, 1.8840000000075463, 1.516000000005846, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, -0.0439999999990448, -1.703999999991268, -0.8279999999949439, 1.1319999999948038, 1.8840000000075463, 1.5159999999969642, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, -0.0439999999990448, -1.7040000000001498, 0.0, 1.1320000000036856, 1.8839999999986645, 0.0 ], [ 1.9200000000000466, 0.02000000000279556, 0.0, -1.6680000000002249, 0.4559999999997899, 0.0, 0.0, 0.0, 0.0, 1.6800000000000148 ] ]
    Implemented: [ [ 1.884, 1.51
```
...[skipping 4490 bytes](etc/1.txt)...
```
    1.828, -1.6, 1.88, 0.368, 0.86, 1.932, 0.264, 0.0 ], [ 0.0, -1.288, 1.884, 0.0, -1.6, 1.88, 0.0, 0.86, 1.932, 0.0 ], [ 0.0, 0.0, 0.0, 1.884, 1.828, 0.0, 1.88, 0.368, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, -1.288, 1.884, 1.828, -1.6, 1.88, 0.368, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, -1.288, 1.884, 0.0, -1.6, 1.88, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.88 ] ]
    Error: [ [ -3.6708414086206176E-12, 1.7003065622134272E-12, 0.0, 4.4853010194856324E-14, 3.1505908992812692E-12, 0.0, 0.0, 0.0, 0.0, 0.0 ], [ -1.6000534230897756E-12, -3.6708414086206176E-12, 1.7003065622134272E-12, 3.049782648645305E-13, 4.4853010194856324E-14, 3.1505908992812692E-12, 0.0, 0.0, 0.0, 0.0 ], [ 0.0, -1.0481837620091028E-11, -3.6708414086206176E-12, 0.0, 4.745870363365157E-12, 4.4853010194856324E-14, 0.0, 0.0, 0.0, 0.0 ], [ -1.3353762540191383E-12, -7.386757872041017E-12, 0.0, 7.700506898800086E-13, 1.7003065622134272E-12, 0.0, 4.4853010194856324E-14, 3.1505908992812692E-12, 0.0, 0.0 ], [ -1.510125358095138E-12, -1.021716045102039E-11, 1.4950263249602358E-12, 2.8408386754108506E-12, 5.210942788380635E-12, 1.7003065622134272E-12, -4.135913833636096E-12, 4.4853010194856324E-14, -1.290301199219357E-12, 0.0 ], [ 0.0, -5.951017456595764E-12, -1.3353762540191383E-12, 0.0, -1.6000534230897756E-12, 5.210942788380635E-12, 0.0, 4.745870363365157E-12, 4.4853010194856324E-14, 0.0 ], [ 0.0, 0.0, 0.0, -1.3353762540191383E-12, 1.4950263249602358E-12, 0.0, -3.6708414086206176E-12, 1.7003065622134272E-12, 0.0, 0.0 ], [ 0.0, 0.0, 0.0, -1.510125358095138E-12, -1.3353762540191383E-12, 1.4950263249602358E-12, 7.281730773911477E-12, 7.700506898800086E-13, -2.740585536287199E-12, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 2.9307667404054882E-12, 7.546407942982114E-12, 0.0, 2.8408386754108506E-12, -3.6708414086206176E-12, 0.0 ], [ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 7.700506898800086E-13 ] ]
    Finite-Difference Derivative Accuracy:
    absoluteTol: 9.8581e-13 +- 2.0049e-12 [0.0000e+00 - 1.5843e-11] (972#)
    relativeTol: 4.1586e-12 +- 1.1530e-11 [2.4328e-15 - 1.2440e-10] (392#)
    
```

### Performance
Code from [LayerTestBase.java:144](../../../../../../../../MindsEye/src/test/java/com/simiacryptus/mindseye/layers/LayerTestBase.java#L144) executed in 0.82 seconds: 
```java
    getPerformanceTester().test(layer, inputPrototype);
```
Logging: 
```
    Evaluation performance: 31.1349 +- 6.8279 [23.0719 - 52.9947]
    Learning performance: 21.2072 +- 1.4491 [19.0565 - 25.8305]
    
```

